{"ast":null,"code":"import _slicedToArray from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./AddForm.module.css\";import Title from\"./UI/Title\";import TextField from\"./UI/TextField\";import{useState}from\"react\";import Button from\"./UI/Button\";import validatefield from\"../validator/validator\";import{useNavigate}from\"react-router-dom\";import Error from\"./UI/Error\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Delete(){var navigate=useNavigate();var _useState=useState(),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setemail=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),emailvalid=_useState4[0],setemailvalid=_useState4[1];var emailChangeHandler=function emailChangeHandler(event){setemail(event.target.value);setemailvalid(validatefield({required:true,email:true},event.target.value));};var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setusername=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),usernamevalid=_useState8[0],setusernamevalid=_useState8[1];var usernameChangeHandler=function usernameChangeHandler(event){setusername(event.target.value);setusernamevalid(validatefield({required:true},event.target.value));};var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var onDelete=function onDelete(){if(emailvalid!==\"valid\"||usernamevalid!==\"valid\"){setError(\"Invalid values\");return;}var token=localStorage.getItem(\"token\");fetch(\"https://ecommerceio.onrender.com/deleteUser\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+token},body:JSON.stringify({username:username,email:email})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.message==\"User deleted\"){navigate(\"/admin\");}}).catch(function(err){console.log(err);setError(\"Request Failed\");});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"section\",{className:classes.box,children:[error&&/*#__PURE__*/_jsx(Error,{title:error}),/*#__PURE__*/_jsx(Title,{title:\"Delete User\"}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",req:true,icon:\"mail-outline\",onChange:emailChangeHandler,valid:emailvalid}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",req:true,icon:\"mail-outline\",onChange:usernameChangeHandler,valid:usernamevalid}),/*#__PURE__*/_jsx(Button,{title:\"Delete User\",onClick:onDelete})]})});}export default Delete;","map":{"version":3,"names":["classes","Title","TextField","useState","Button","validatefield","useNavigate","Error","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Delete","navigate","_useState","_useState2","_slicedToArray","email","setemail","_useState3","_useState4","emailvalid","setemailvalid","emailChangeHandler","event","target","value","required","_useState5","_useState6","username","setusername","_useState7","_useState8","usernamevalid","setusernamevalid","usernameChangeHandler","_useState9","_useState10","error","setError","onDelete","token","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","then","res","json","data","console","log","message","catch","err","children","className","box","title","label","req","icon","onChange","valid","onClick"],"sources":["D:/Task1FE/src/Components/Delete.js"],"sourcesContent":["import classes from \"./AddForm.module.css\";\r\nimport Title from \"./UI/Title\";\r\nimport TextField from \"./UI/TextField\";\r\nimport { useState } from \"react\";\r\nimport Button from \"./UI/Button\";\r\nimport validatefield from \"../validator/validator\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Error from \"./UI/Error\";\r\n\r\nfunction Delete() {\r\n  const navigate = useNavigate();\r\n  const [email, setemail] = useState();\r\n  const [emailvalid, setemailvalid] = useState();\r\n  const emailChangeHandler = (event) => {\r\n    setemail(event.target.value);\r\n    setemailvalid(\r\n      validatefield(\r\n        {\r\n          required: true,\r\n          email: true,\r\n        },\r\n        event.target.value\r\n      )\r\n    );\r\n  };\r\n  const [username, setusername] = useState();\r\n  const [usernamevalid, setusernamevalid] = useState();\r\n  const usernameChangeHandler = (event) => {\r\n    setusername(event.target.value);\r\n    setusernamevalid(\r\n      validatefield(\r\n        {\r\n          required: true,\r\n        },\r\n        event.target.value\r\n      )\r\n    );\r\n  };\r\n  const [error, setError] = useState();\r\n  const onDelete = () => {\r\n    if (emailvalid !== \"valid\" || usernamevalid !== \"valid\") {\r\n      setError(\"Invalid values\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(\"https://ecommerceio.onrender.com/deleteUser\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        username: username,\r\n        email: email,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.message == \"User deleted\") {\r\n          navigate(\"/admin\");\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setError(\"Request Failed\");\r\n      });\r\n  };\r\n  return (\r\n    <>\r\n      <section className={classes.box}>\r\n        {error && <Error title={error} />}\r\n        <Title title=\"Delete User\" />\r\n        <TextField\r\n          label=\"Email\"\r\n          req={true}\r\n          icon=\"mail-outline\"\r\n          onChange={emailChangeHandler}\r\n          valid={emailvalid}\r\n        />\r\n        <TextField\r\n          label=\"Username\"\r\n          req={true}\r\n          icon=\"mail-outline\"\r\n          onChange={usernameChangeHandler}\r\n          valid={usernamevalid}\r\n        />\r\n        <Button title=\"Delete User\" onClick={onDelete} />\r\n      </section>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Delete;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}