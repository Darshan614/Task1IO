{"ast":null,"code":"import _regeneratorRuntime from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useParams}from\"react-router-dom\";import ProductData from\"../Components/UI/ProductData\";import SimilarProducts from\"../Components/SimilarProducts\";import Reviews from\"../Components/Reviews\";import AddReview from\"../Components/AddReview\";import Loading from\"../Components/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductInfo(){var errorHandler=function errorHandler(){setError(null);};console.log(\"pro info\");var params=useParams();// console.log(typeof params.productId);\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),showReviews=_useState2[0],setshowReviews=_useState2[1];// const [loading, setloading] = useState(false);\n// const params = useParams();\nvar _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),reviewList=_useState4[0],setReviewList=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),pname=_useState6[0],setpname=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),pprice=_useState8[0],setpprice=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),pdesc=_useState10[0],setpdesc=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),pimageURL=_useState12[0],setpimageURL=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),thumbimages=_useState14[0],setthumbimages=_useState14[1];var _useState15=useState(1),_useState16=_slicedToArray(_useState15,2),rating=_useState16[0],setrating=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),id=_useState18[0],setid=_useState18[1];var _useState19=useState(),_useState20=_slicedToArray(_useState19,2),error=_useState20[0],setError=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),similar=_useState22[0],setsimilar=_useState22[1];var _useState23=useState(true),_useState24=_slicedToArray(_useState23,2),loading=_useState24[0],setloading=_useState24[1];useEffect(function(){fetch(\"https://ecommerceio.onrender.com/productInfo\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({productId:params.productId})}).then(function(res){return res.json();}).then(function(data){// setReviewList([]);\nsetshowReviews(false);setpname(data.productData.productname);setpprice(data.productData.price);setpdesc(data.productData.description);setpimageURL(data.productData.imageURLs[0]);setthumbimages(data.productData.imageURLs);setrating(data.productData.rating);setid(data.productData._id);//data for similar products\nfetch(\"https://ecommerceio.onrender.com/similarProducts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({category:data.productData.category})}).then(function(res){return res.json();}).then(function(data){setsimilar(data.data);setloading(false);});}).catch(function(err){// console.log(\"errrrrrrrrrrr\", err);\n});},[params.productId]);var fetchReviews=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var url;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:url=\"https://ecommerceio.onrender.com/getReviews/\"+params.productId;if(showReviews){_context.next=6;break;}_context.next=4;return fetch(url).then(function(res){return res.json();}).then(function(data){// console.log(\"review data\", data);\nsetshowReviews(!showReviews);setloading(false);setReviewList(data.reviewsList);});case 4:_context.next=7;break;case 6:setshowReviews(!showReviews);case 7:case\"end\":return _context.stop();}},_callee);}));return function fetchReviews(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loading,{}),!loading&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(ProductData,{pname:pname,pprice:pprice,pdesc:pdesc,pimageURL:pimageURL,thumbimages:thumbimages,rating:rating,id:id}),/*#__PURE__*/_jsx(SimilarProducts,{products:similar}),/*#__PURE__*/_jsx(Reviews,{reviewList:reviewList,showReviews:showReviews,fetchReviews:fetchReviews}),/*#__PURE__*/_jsx(AddReview,{})]})]});}export default ProductInfo;","map":{"version":3,"names":["useEffect","useState","useParams","ProductData","SimilarProducts","Reviews","AddReview","Loading","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ProductInfo","errorHandler","setError","console","log","params","_useState","_useState2","_slicedToArray","showReviews","setshowReviews","_useState3","_useState4","reviewList","setReviewList","_useState5","_useState6","pname","setpname","_useState7","_useState8","pprice","setpprice","_useState9","_useState10","pdesc","setpdesc","_useState11","_useState12","pimageURL","setpimageURL","_useState13","_useState14","thumbimages","setthumbimages","_useState15","_useState16","rating","setrating","_useState17","_useState18","id","setid","_useState19","_useState20","error","_useState21","_useState22","similar","setsimilar","_useState23","_useState24","loading","setloading","fetch","method","headers","body","JSON","stringify","productId","then","res","json","data","productData","productname","price","description","imageURLs","_id","category","catch","err","fetchReviews","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","wrap","_callee$","_context","prev","next","reviewsList","stop","apply","arguments","children","products"],"sources":["D:/Task1FE/src/pages/ProductInfo.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport ProductData from \"../Components/UI/ProductData\";\r\nimport SimilarProducts from \"../Components/SimilarProducts\";\r\nimport Reviews from \"../Components/Reviews\";\r\nimport AddReview from \"../Components/AddReview\";\r\nimport Loading from \"../Components/Loading\";\r\n\r\nfunction ProductInfo() {\r\n  const errorHandler = () => {\r\n    setError(null);\r\n  };\r\n  console.log(\"pro info\");\r\n  const params = useParams();\r\n  // console.log(typeof params.productId);\r\n  const [showReviews, setshowReviews] = useState(false);\r\n  // const [loading, setloading] = useState(false);\r\n  // const params = useParams();\r\n  const [reviewList, setReviewList] = useState([]);\r\n\r\n  const [pname, setpname] = useState();\r\n  const [pprice, setpprice] = useState();\r\n  const [pdesc, setpdesc] = useState();\r\n  const [pimageURL, setpimageURL] = useState();\r\n  const [thumbimages, setthumbimages] = useState([]);\r\n  const [rating, setrating] = useState(1);\r\n  const [id, setid] = useState();\r\n  const [error, setError] = useState();\r\n  const [similar, setsimilar] = useState([]);\r\n  const [loading, setloading] = useState(true);\r\n  useEffect(() => {\r\n    fetch(\"https://ecommerceio.onrender.com/productInfo\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        productId: params.productId,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        // setReviewList([]);\r\n        setshowReviews(false);\r\n        setpname(data.productData.productname);\r\n        setpprice(data.productData.price);\r\n        setpdesc(data.productData.description);\r\n        setpimageURL(data.productData.imageURLs[0]);\r\n        setthumbimages(data.productData.imageURLs);\r\n        setrating(data.productData.rating);\r\n        setid(data.productData._id);\r\n\r\n        //data for similar products\r\n        fetch(\"https://ecommerceio.onrender.com/similarProducts\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({\r\n            category: data.productData.category,\r\n          }),\r\n        })\r\n          .then((res) => res.json())\r\n          .then((data) => {\r\n            setsimilar(data.data);\r\n            setloading(false);\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        // console.log(\"errrrrrrrrrrr\", err);\r\n      });\r\n  }, [params.productId]);\r\n  const fetchReviews = async () => {\r\n    const url =\r\n      \"https://ecommerceio.onrender.com/getReviews/\" + params.productId;\r\n    if (!showReviews) {\r\n      await fetch(url)\r\n        .then((res) => {\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          // console.log(\"review data\", data);\r\n          setshowReviews(!showReviews);\r\n          setloading(false);\r\n          setReviewList(data.reviewsList);\r\n        });\r\n    } else {\r\n      setshowReviews(!showReviews);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* {pname} {pprice} {pdesc} */}\r\n      {loading && <Loading />}\r\n      {!loading && (\r\n        <>\r\n          <ProductData\r\n            pname={pname}\r\n            pprice={pprice}\r\n            pdesc={pdesc}\r\n            pimageURL={pimageURL}\r\n            thumbimages={thumbimages}\r\n            rating={rating}\r\n            id={id}\r\n          />\r\n          <SimilarProducts products={similar} />\r\n          <Reviews\r\n            reviewList={reviewList}\r\n            showReviews={showReviews}\r\n            fetchReviews={fetchReviews}\r\n          />\r\n          <AddReview />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProductInfo;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}