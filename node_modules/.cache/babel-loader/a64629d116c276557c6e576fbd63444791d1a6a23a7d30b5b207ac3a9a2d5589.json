{"ast":null,"code":"import _slicedToArray from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classes from\"./AddForm.module.css\";import Title from\"../Form/Title\";import TextField from\"../Form/TextField\";import{useState}from\"react\";import Button from\"../UI/Button\";import validatefield from\"../../validator/validator\";import{useNavigate}from\"react-router-dom\";import Error from\"../UI/Error\";import Loading from\"../UI/Loading\";import Modal from\"../UI/Modal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Delete(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setloading=_useState2[1];var navigate=useNavigate();var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setshowModal=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setemail=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),emailvalid=_useState8[0],setemailvalid=_useState8[1];var emailChangeHandler=function emailChangeHandler(event){setemail(event.target.value);setemailvalid(validatefield({required:true,email:true},event.target.value));};var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),username=_useState10[0],setusername=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),usernamevalid=_useState12[0],setusernamevalid=_useState12[1];var usernameChangeHandler=function usernameChangeHandler(event){setusername(event.target.value);setusernamevalid(validatefield({required:true},event.target.value));};var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),error=_useState14[0],setError=_useState14[1];var onDelete=function onDelete(){if(emailvalid!==\"valid\"||usernamevalid!==\"valid\"){setError(\"Invalid values\");return;}var token=localStorage.getItem(\"token\");setloading(true);fetch(\"https://ecommerceio.onrender.com/deleteUser\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+token},body:JSON.stringify({username:username,email:email})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.message==\"User deleted\"){setloading(false);setshowModal(true);}}).catch(function(err){console.log(err);setError(\"Request Failed\");});};var onClose=function onClose(){setshowModal(false);navigate(\"/admin\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[loading&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsxs(\"section\",{className:classes.box,children:[error&&/*#__PURE__*/_jsx(Error,{title:error}),/*#__PURE__*/_jsx(Title,{title:\"Delete User\"}),/*#__PURE__*/_jsx(TextField,{label:\"Email\",req:true,icon:\"mail-outline\",onChange:emailChangeHandler,valid:emailvalid}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",req:true,icon:\"mail-outline\",onChange:usernameChangeHandler,valid:usernamevalid}),/*#__PURE__*/_jsx(Button,{title:\"Delete User\",onClick:onDelete})]}),showModal&&/*#__PURE__*/_jsx(Modal,{title:\"Success!\",message:\"User deleted\",onClick:onClose})]});}export default Delete;","map":{"version":3,"names":["classes","Title","TextField","useState","Button","validatefield","useNavigate","Error","Loading","Modal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Delete","_useState","_useState2","_slicedToArray","loading","setloading","navigate","_useState3","_useState4","showModal","setshowModal","_useState5","_useState6","email","setemail","_useState7","_useState8","emailvalid","setemailvalid","emailChangeHandler","event","target","value","required","_useState9","_useState10","username","setusername","_useState11","_useState12","usernamevalid","setusernamevalid","usernameChangeHandler","_useState13","_useState14","error","setError","onDelete","token","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","then","res","json","data","console","log","message","catch","err","onClose","children","className","box","title","label","req","icon","onChange","valid","onClick"],"sources":["D:/Task1FE/src/Components/Admin/Delete.js"],"sourcesContent":["import classes from \"./AddForm.module.css\";\r\nimport Title from \"../Form/Title\";\r\nimport TextField from \"../Form/TextField\";\r\nimport { useState } from \"react\";\r\nimport Button from \"../UI/Button\";\r\nimport validatefield from \"../../validator/validator\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Error from \"../UI/Error\";\r\nimport Loading from \"../UI/Loading\";\r\nimport Modal from \"../UI/Modal\";\r\n\r\nfunction Delete() {\r\n  const [loading, setloading] = useState(false);\r\n  const navigate = useNavigate();\r\n  const [showModal, setshowModal] = useState(false);\r\n  const [email, setemail] = useState();\r\n  const [emailvalid, setemailvalid] = useState();\r\n  const emailChangeHandler = (event) => {\r\n    setemail(event.target.value);\r\n    setemailvalid(\r\n      validatefield(\r\n        {\r\n          required: true,\r\n          email: true,\r\n        },\r\n        event.target.value\r\n      )\r\n    );\r\n  };\r\n  const [username, setusername] = useState();\r\n  const [usernamevalid, setusernamevalid] = useState();\r\n  const usernameChangeHandler = (event) => {\r\n    setusername(event.target.value);\r\n    setusernamevalid(\r\n      validatefield(\r\n        {\r\n          required: true,\r\n        },\r\n        event.target.value\r\n      )\r\n    );\r\n  };\r\n  const [error, setError] = useState();\r\n  const onDelete = () => {\r\n    if (emailvalid !== \"valid\" || usernamevalid !== \"valid\") {\r\n      setError(\"Invalid values\");\r\n      return;\r\n    }\r\n    const token = localStorage.getItem(\"token\");\r\n    setloading(true);\r\n    fetch(\"https://ecommerceio.onrender.com/deleteUser\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n      body: JSON.stringify({\r\n        username: username,\r\n        email: email,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.message == \"User deleted\") {\r\n          setloading(false);\r\n          setshowModal(true);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n        setError(\"Request Failed\");\r\n      });\r\n  };\r\n  const onClose = () => {\r\n    setshowModal(false);\r\n    navigate(\"/admin\");\r\n  };\r\n  return (\r\n    <>\r\n      {loading && <Loading />}\r\n      <section className={classes.box}>\r\n        {error && <Error title={error} />}\r\n        <Title title=\"Delete User\" />\r\n        <TextField\r\n          label=\"Email\"\r\n          req={true}\r\n          icon=\"mail-outline\"\r\n          onChange={emailChangeHandler}\r\n          valid={emailvalid}\r\n        />\r\n        <TextField\r\n          label=\"Username\"\r\n          req={true}\r\n          icon=\"mail-outline\"\r\n          onChange={usernameChangeHandler}\r\n          valid={usernamevalid}\r\n        />\r\n        <Button title=\"Delete User\" onClick={onDelete} />\r\n      </section>\r\n      {showModal && (\r\n        <Modal title=\"Success!\" message=\"User deleted\" onClick={onClose} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Delete;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}