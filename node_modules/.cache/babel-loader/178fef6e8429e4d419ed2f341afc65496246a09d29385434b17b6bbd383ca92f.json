{"ast":null,"code":"import _slicedToArray from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _defineProperty from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import classes from\"./Card.module.css\";import{useSelector,useDispatch}from\"react-redux\";import{cartActions}from\"../../store/index\";import{useNavigate,useParams}from\"react-router-dom\";import{useState,useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Card(props){var dispatch=useDispatch();var params=useParams();var navigate=useNavigate();var roles=useSelector(function(state){return state.auth.role;});var onAddProduct=function onAddProduct(e){e.stopPropagation();var key=props.id;dispatch(cartActions.addToCart(_defineProperty({},key,1)));};var productClickHandler=function productClickHandler(){document.documentElement.scrollTop=0;var page=\"/product/\"+props.id;navigate(page);// window.location.reload(true);\n};var arr=[];for(var i=1;i<=Math.round(props.rating);i++){arr.push(/*#__PURE__*/_jsx(\"ion-icon\",{className:classes.star,name:\"star\"}));}var _useState=useState(0),_useState2=_slicedToArray(_useState,2),q=_useState2[0],setq=_useState2[1];var quantity=useSelector(function(state){return state.cart.cart.cartList;});useEffect(function(){// console.log(\"quantity\", quantity, props.id);\nfor(var x=0;x<quantity.length;x++){console.log(\"inloop\",quantity[x],props.id);if(Object.keys(quantity[x])[0]==props.id){// console.log(x, \"found\", quantity[x][Object.keys(quantity[x])[0]]);\nsetq(quantity[x][Object.keys(quantity[x])[0]]);return;}}setq(0);// setq(quantity[1][props.prod._id]);\n},[quantity,props.id]);var onAdd=function onAdd(e){e.stopPropagation();var key=props.id;dispatch(cartActions.addToCart(_defineProperty({},key,1)));};var onRemove=function onRemove(e){e.stopPropagation();var key=props.id;dispatch(cartActions.removefromcart(_defineProperty({},key,1)));};var onedit=function onedit(e){e.stopPropagation();var url=\"/admin/editProduct?prodId=\"+props.id;navigate(url);};return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 col-lg-3\",style:{\"margin-bottom\":\"40px\"},children:/*#__PURE__*/_jsxs(\"div\",{onClick:productClickHandler,className:\"card \".concat(classes.cards),children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.mycard,children:[/*#__PURE__*/_jsx(\"img\",{className:\"card-img-top \".concat(classes.img),src:props.imageURL,alt:\"productimage\"}),roles===\"admin\"&&/*#__PURE__*/_jsx(\"button\",{className:classes.edit,onClick:onedit,children:/*#__PURE__*/_jsx(\"ion-icon\",{name:\"pencil-outline\"})})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title \".concat(classes.elip),children:props.title}),/*#__PURE__*/_jsxs(\"div\",{className:classes.star,children:[/*#__PURE__*/_jsx(\"div\",{children:arr}),/*#__PURE__*/_jsxs(\"div\",{className:classes.nor,children:[\"(\",props.numOfRev,\")\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{class:\"card-footer\",children:[/*#__PURE__*/_jsxs(\"small\",{class:\"text-muted\",children:[\"\\u20B9 \",props.price]}),q===0?/*#__PURE__*/_jsx(\"button\",{onClick:onAddProduct,className:classes.addcart,children:/*#__PURE__*/_jsx(\"small\",{children:\"Add to Cart\"})}):/*#__PURE__*/_jsxs(\"span\",{className:classes.quant,children:[/*#__PURE__*/_jsx(\"button\",{className:classes.inc,onClick:onAdd,children:\"+\"}),/*#__PURE__*/_jsx(\"span\",{className:classes.quantity,children:q}),/*#__PURE__*/_jsx(\"button\",{className:classes.inc,onClick:onRemove,children:\"-\"})]})]})]})});}export default Card;","map":{"version":3,"names":["classes","useSelector","useDispatch","cartActions","useNavigate","useParams","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Card","props","dispatch","params","navigate","roles","state","auth","role","onAddProduct","e","stopPropagation","key","id","addToCart","_defineProperty","productClickHandler","document","documentElement","scrollTop","page","arr","i","Math","round","rating","push","className","star","name","_useState","_useState2","_slicedToArray","q","setq","quantity","cart","cartList","x","length","console","log","Object","keys","onAdd","onRemove","removefromcart","onedit","url","style","children","onClick","concat","cards","mycard","img","src","imageURL","alt","edit","class","elip","title","nor","numOfRev","price","addcart","quant","inc"],"sources":["D:/Task1FE/src/Components/UI/Card.js"],"sourcesContent":["import classes from \"./Card.module.css\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { cartActions } from \"../../store/index\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nfunction Card(props) {\r\n  const dispatch = useDispatch();\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n  const roles = useSelector((state) => state.auth.role);\r\n  const onAddProduct = (e) => {\r\n    e.stopPropagation();\r\n    const key = props.id;\r\n    dispatch(cartActions.addToCart({ [key]: 1 }));\r\n  };\r\n  const productClickHandler = () => {\r\n    document.documentElement.scrollTop = 0;\r\n    const page = \"/product/\" + props.id;\r\n    navigate(page);\r\n    // window.location.reload(true);\r\n  };\r\n  let arr = [];\r\n  for (var i = 1; i <= Math.round(props.rating); i++) {\r\n    arr.push(<ion-icon className={classes.star} name=\"star\"></ion-icon>);\r\n  }\r\n\r\n  const [q, setq] = useState(0);\r\n  const quantity = useSelector((state) => state.cart.cart.cartList);\r\n  useEffect(() => {\r\n    // console.log(\"quantity\", quantity, props.id);\r\n    for (let x = 0; x < quantity.length; x++) {\r\n      console.log(\"inloop\", quantity[x], props.id);\r\n      if (Object.keys(quantity[x])[0] == props.id) {\r\n        // console.log(x, \"found\", quantity[x][Object.keys(quantity[x])[0]]);\r\n        setq(quantity[x][Object.keys(quantity[x])[0]]);\r\n        return;\r\n      }\r\n    }\r\n    setq(0);\r\n    // setq(quantity[1][props.prod._id]);\r\n  }, [quantity, props.id]);\r\n  const onAdd = (e) => {\r\n    e.stopPropagation();\r\n    const key = props.id;\r\n    dispatch(cartActions.addToCart({ [key]: 1 }));\r\n  };\r\n  const onRemove = (e) => {\r\n    e.stopPropagation();\r\n    const key = props.id;\r\n    dispatch(cartActions.removefromcart({ [key]: 1 }));\r\n  };\r\n  const onedit = (e) => {\r\n    e.stopPropagation();\r\n    const url = \"/admin/editProduct?prodId=\" + props.id;\r\n    navigate(url);\r\n  };\r\n  return (\r\n    <div className={`col-md-4 col-lg-3`} style={{ \"margin-bottom\": \"40px\" }}>\r\n      <div onClick={productClickHandler} className={`card ${classes.cards}`}>\r\n        <div className={classes.mycard}>\r\n          <img\r\n            className={`card-img-top ${classes.img}`}\r\n            src={props.imageURL}\r\n            alt=\"productimage\"\r\n          />\r\n          {roles === \"admin\" && (\r\n            <button className={classes.edit} onClick={onedit}>\r\n              <ion-icon name=\"pencil-outline\"></ion-icon>\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div class=\"card-body\">\r\n          <h5 className={`card-title ${classes.elip}`}>{props.title}</h5>\r\n          <div className={classes.star}>\r\n            <div>{arr}</div>\r\n            <div className={classes.nor}>({props.numOfRev})</div>\r\n          </div>\r\n\r\n          {/* for (var i = 0; i < props.rating; i++) {\r\n      arr.push(<ion-icon name=\"star\"></ion-icon>);\r\n    } */}\r\n        </div>\r\n        <div class=\"card-footer\">\r\n          <small class=\"text-muted\">&#8377; {props.price}</small>\r\n          {q === 0 ? (\r\n            <button onClick={onAddProduct} className={classes.addcart}>\r\n              <small>Add to Cart</small>\r\n            </button>\r\n          ) : (\r\n            <span className={classes.quant}>\r\n              <button className={classes.inc} onClick={onAdd}>\r\n                +\r\n              </button>\r\n              <span className={classes.quantity}>{q}</span>\r\n              <button className={classes.inc} onClick={onRemove}>\r\n                -\r\n              </button>\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}