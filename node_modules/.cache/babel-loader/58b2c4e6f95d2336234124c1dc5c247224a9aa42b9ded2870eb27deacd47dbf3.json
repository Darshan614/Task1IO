{"ast":null,"code":"import _slicedToArray from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Title from\"./UI/Title\";import TextField from\"./UI/TextField\";import Error from\"./UI/Error\";import validatefield from\"../validator/validator\";import Button from\"./UI/Button\";import{useState}from\"react\";import classes from\"./Update.module.css\";import Modal from\"../Components/UI/Modal\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Update(props){var navigate=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showModal=_useState4[0],setshowModal=_useState4[1];var _useState5=useState(props.userprofile.username),_useState6=_slicedToArray(_useState5,2),username=_useState6[0],setusername=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),usernameValid=_useState8[0],setusernameValid=_useState8[1];var onUserNameChangeHandler=function onUserNameChangeHandler(event){setusername(event.target.value);setusernameValid(validatefield({minLength:3,maxLength:10,required:true},event.target.value));};var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),addressValid=_useState10[0],setaddressValid=_useState10[1];var _useState11=useState(props.userprofile.address),_useState12=_slicedToArray(_useState11,2),address=_useState12[0],setaddress=_useState12[1];var onAddressChangeHandler=function onAddressChangeHandler(event){setaddress(event.target.value);setaddressValid(validatefield({minLength:6,maxLength:30,required:true},event.target.value));};var onUpdate=function onUpdate(){var token=localStorage.getItem(\"token\");fetch(\"https://ecommerceio.onrender.com/updateProfile\",{method:\"POST\",headers:{Authorization:\"Bearer \"+token,\"Content-Type\":\"application/json\"},body:JSON.stringify({address:address,username:username})}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.message==\"User profile updated\"){setshowModal(true);}});};var onClose=function onClose(){setshowModal(false);navigate(\"/profile\");};var title=\"Update user \";return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:classes.box,children:[/*#__PURE__*/_jsx(Title,{title:title}),error&&/*#__PURE__*/_jsx(Error,{title:error}),/*#__PURE__*/_jsx(TextField,{label:\"Username\",onChange:onUserNameChangeHandler,req:true,valid:usernameValid,icon:\"person-outline\",value:username}),/*#__PURE__*/_jsx(TextField,{label:\"Address\",onChange:onAddressChangeHandler,req:true,valid:addressValid,icon:\"lock-closed-outline\",value:address}),/*#__PURE__*/_jsx(Button,{title:\"Update\",onClick:onUpdate})]}),showModal&&/*#__PURE__*/_jsx(Modal,{title:\"Success!\",message:\"Profile Updated\",onClick:onClose})]});}export default Update;","map":{"version":3,"names":["Title","TextField","Error","validatefield","Button","useState","classes","Modal","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Update","props","navigate","_useState","_useState2","_slicedToArray","error","setError","_useState3","_useState4","showModal","setshowModal","_useState5","userprofile","username","_useState6","setusername","_useState7","_useState8","usernameValid","setusernameValid","onUserNameChangeHandler","event","target","value","minLength","maxLength","required","_useState9","_useState10","addressValid","setaddressValid","_useState11","address","_useState12","setaddress","onAddressChangeHandler","onUpdate","token","localStorage","getItem","fetch","method","headers","Authorization","body","JSON","stringify","then","res","json","data","console","log","message","onClose","title","children","className","box","label","onChange","req","valid","icon","onClick"],"sources":["D:/Task1FE/src/Components/Update.js"],"sourcesContent":["import Title from \"./UI/Title\";\r\nimport TextField from \"./UI/TextField\";\r\nimport Error from \"./UI/Error\";\r\nimport validatefield from \"../validator/validator\";\r\nimport Button from \"./UI/Button\";\r\nimport { useState } from \"react\";\r\nimport classes from \"./Update.module.css\";\r\nimport Modal from \"../Components/UI/Modal\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nfunction Update(props) {\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState(\"\");\r\n  const [showModal, setshowModal] = useState(false);\r\n  const [username, setusername] = useState(props.userprofile.username);\r\n  const [usernameValid, setusernameValid] = useState(\"\");\r\n  const onUserNameChangeHandler = (event) => {\r\n    setusername(event.target.value);\r\n    setusernameValid(\r\n      validatefield(\r\n        { minLength: 3, maxLength: 10, required: true },\r\n        event.target.value\r\n      )\r\n    );\r\n  };\r\n  const [addressValid, setaddressValid] = useState(\"\");\r\n  const [address, setaddress] = useState(props.userprofile.address);\r\n  const onAddressChangeHandler = (event) => {\r\n    setaddress(event.target.value);\r\n    setaddressValid(\r\n      validatefield(\r\n        { minLength: 6, maxLength: 30, required: true },\r\n        event.target.value\r\n      )\r\n    );\r\n  };\r\n  const onUpdate = () => {\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(\"https://ecommerceio.onrender.com/updateProfile\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        address: address,\r\n        username: username,\r\n      }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.message == \"User profile updated\") {\r\n          setshowModal(true);\r\n        }\r\n      });\r\n  };\r\n  const onClose = () => {\r\n    setshowModal(false);\r\n    navigate(\"/profile\");\r\n  };\r\n  const title = \"Update user \";\r\n  return (\r\n    <>\r\n      <section className={classes.box}>\r\n        <Title title={title} />\r\n\r\n        {error && <Error title={error} />}\r\n        <TextField\r\n          label=\"Username\"\r\n          onChange={onUserNameChangeHandler}\r\n          req={true}\r\n          valid={usernameValid}\r\n          icon=\"person-outline\"\r\n          value={username}\r\n        />\r\n        <TextField\r\n          label=\"Address\"\r\n          onChange={onAddressChangeHandler}\r\n          req={true}\r\n          valid={addressValid}\r\n          icon=\"lock-closed-outline\"\r\n          value={address}\r\n        />\r\n        <Button title=\"Update\" onClick={onUpdate} />\r\n      </section>\r\n      {showModal && (\r\n        <Modal title=\"Success!\" message=\"Profile Updated\" onClick={onClose} />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Update;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}