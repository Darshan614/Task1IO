{"ast":null,"code":"import _slicedToArray from\"D:/Task1FE/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createBrowserRouter,RouterProvider}from\"react-router-dom\";import Home from\"./pages/Home\";import RootLayout from\"./pages/RootLayout\";import Auth from\"./pages/Auth\";import Cart from\"./pages/Cart\";import React,{useState}from\"react\";import Products from\"./pages/Products\";import Admin from\"./pages/Admin\";import Cancel from\"./pages/Cancel\";import ProductInfo from\"./pages/ProductInfo\";import Modify from\"./pages/Modify\";import Success from\"./pages/Success\";import{checkRoleLoader}from\"./util/auth\";import{useEffect}from\"react\";import{authActions}from\"./store/index\";import{useDispatch}from\"react-redux\";import MyOrders from\"./pages/MyOrders\";import Profile from\"./pages/Profile\";import ResetPassword from\"./pages/ResetPassword\";import Contact from\"./pages/Contact\";import Loading from\"./Components/UI/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var router=createBrowserRouter([{path:\"/\",element:/*#__PURE__*/_jsx(RootLayout,{}),children:[{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})},{path:\"/auth\",element:/*#__PURE__*/_jsx(Auth,{})},{path:\"/products\",element:/*#__PURE__*/_jsx(Products,{})},{path:\"/admin\",element:/*#__PURE__*/_jsx(Admin,{}),loader:checkRoleLoader},{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{})},{path:\"/success\",element:/*#__PURE__*/_jsx(Success,{})},{path:\"/cancel\",element:/*#__PURE__*/_jsx(Cancel,{})},{path:\"/myorder\",element:/*#__PURE__*/_jsx(MyOrders,{})},{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})},{path:\"/admin/:modify\",element:/*#__PURE__*/_jsx(Modify,{}),loader:checkRoleLoader},{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ProductInfo,{})},{path:\"/reset/:token\",element:/*#__PURE__*/_jsx(ResetPassword,{})},{path:\"/contact\",element:/*#__PURE__*/_jsx(Contact,{})}]}]);function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setloading=_useState2[1];console.log(\"in app running\");var dispatch=useDispatch();useEffect(function(){console.log(\"use effect running\");setloading(true);var token=localStorage.getItem(\"token\");var url1=\"https://ecommerceio.onrender.com/checklogin\";var url2=\"http://localhost:8080/checklogin\";fetch(url1,{method:\"GET\",cache:\"no-store\",headers:{Authorization:\"Bearer \"+token}}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.message===\"Some problem in authentication\"){setloading(false);dispatch(authActions.logout());}else if(data.message===\"Invalid token\"){setloading(false);dispatch(authActions.logout());}else if(data.message===\"User is logged in\"){console.log(\"setting the user role\",data.role);setloading(false);dispatch(authActions.login(data.role));}});},[dispatch]);return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(RouterProvider,{router:router})});}export default App;","map":{"version":3,"names":["createBrowserRouter","RouterProvider","Home","RootLayout","Auth","Cart","React","useState","Products","Admin","Cancel","ProductInfo","Modify","Success","checkRoleLoader","useEffect","authActions","useDispatch","MyOrders","Profile","ResetPassword","Contact","Loading","jsx","_jsx","Fragment","_Fragment","router","path","element","children","loader","App","_useState","_useState2","_slicedToArray","loading","setloading","console","log","dispatch","token","localStorage","getItem","url1","url2","fetch","method","cache","headers","Authorization","then","res","json","data","message","logout","role","login"],"sources":["D:/Task1FE/src/App.js"],"sourcesContent":["import { createBrowserRouter, RouterProvider } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport RootLayout from \"./pages/RootLayout\";\r\nimport Auth from \"./pages/Auth\";\r\nimport Cart from \"./pages/Cart\";\r\nimport React, { useState } from \"react\";\r\nimport Products from \"./pages/Products\";\r\nimport Admin from \"./pages/Admin\";\r\nimport Cancel from \"./pages/Cancel\";\r\nimport ProductInfo from \"./pages/ProductInfo\";\r\nimport Modify from \"./pages/Modify\";\r\nimport Success from \"./pages/Success\";\r\nimport { checkRoleLoader } from \"./util/auth\";\r\nimport { useEffect } from \"react\";\r\nimport { authActions } from \"./store/index\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport MyOrders from \"./pages/MyOrders\";\r\nimport Profile from \"./pages/Profile\";\r\nimport ResetPassword from \"./pages/ResetPassword\";\r\nimport Contact from \"./pages/Contact\";\r\nimport Loading from \"./Components/UI/Loading\";\r\n\r\nconst router = createBrowserRouter([\r\n  {\r\n    path: \"/\",\r\n    element: <RootLayout />,\r\n    children: [\r\n      { path: \"/\", element: <Home /> },\r\n      { path: \"/auth\", element: <Auth /> },\r\n      { path: \"/products\", element: <Products /> },\r\n      { path: \"/admin\", element: <Admin />, loader: checkRoleLoader },\r\n      { path: \"/cart\", element: <Cart /> },\r\n      { path: \"/success\", element: <Success /> },\r\n      { path: \"/cancel\", element: <Cancel /> },\r\n      { path: \"/myorder\", element: <MyOrders /> },\r\n      { path: \"/profile\", element: <Profile /> },\r\n      {\r\n        path: \"/admin/:modify\",\r\n        element: <Modify />,\r\n        loader: checkRoleLoader,\r\n      },\r\n      {\r\n        path: \"/product/:productId\",\r\n        element: <ProductInfo />,\r\n      },\r\n      {\r\n        path: \"/reset/:token\",\r\n        element: <ResetPassword />,\r\n      },\r\n      {\r\n        path: \"/contact\",\r\n        element: <Contact />,\r\n      },\r\n    ],\r\n  },\r\n]);\r\n\r\nfunction App() {\r\n  const [loading, setloading] = useState(false);\r\n  console.log(\"in app running\");\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    console.log(\"use effect running\");\r\n    setloading(true);\r\n    const token = localStorage.getItem(\"token\");\r\n    const url1 = \"https://ecommerceio.onrender.com/checklogin\";\r\n    const url2 = \"http://localhost:8080/checklogin\";\r\n    fetch(url1, {\r\n      method: \"GET\",\r\n      cache: \"no-store\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.message === \"Some problem in authentication\") {\r\n          setloading(false);\r\n          dispatch(authActions.logout());\r\n        } else if (data.message === \"Invalid token\") {\r\n          setloading(false);\r\n          dispatch(authActions.logout());\r\n        } else if (data.message === \"User is logged in\") {\r\n          console.log(\"setting the user role\", data.role);\r\n          setloading(false);\r\n          dispatch(authActions.login(data.role));\r\n        }\r\n      });\r\n  }, [dispatch]);\r\n  return <>{loading ? <Loading /> : <RouterProvider router={router} />}</>;\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}