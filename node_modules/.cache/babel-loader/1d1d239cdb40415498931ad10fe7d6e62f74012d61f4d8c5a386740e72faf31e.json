{"ast":null,"code":"import{createBrowserRouter,RouterProvider}from\"react-router-dom\";import Home from\"./pages/Home\";import RootLayout from\"./pages/RootLayout\";import Auth from\"./pages/Auth\";import Cart from\"./pages/Cart\";import React from\"react\";import Products from\"./pages/Products\";import Admin from\"./pages/Admin\";import Cancel from\"./pages/Cancel\";import ProductInfo from\"./pages/ProductInfo\";import Modify from\"./pages/Modify\";import Success from\"./pages/Success\";import{checkRoleLoader}from\"./util/auth\";import{useEffect}from\"react\";import{authActions}from\"./store/index\";import{useDispatch}from\"react-redux\";import MyOrders from\"./pages/MyOrders\";import Profile from\"./pages/Profile\";import ResetPassword from\"./pages/ResetPassword\";import Update from\"./Components/Update\";import{jsx as _jsx}from\"react/jsx-runtime\";var router=createBrowserRouter([{path:\"/\",element:/*#__PURE__*/_jsx(RootLayout,{}),children:[{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})},{path:\"/auth\",element:/*#__PURE__*/_jsx(Auth,{})},{path:\"/products\",element:/*#__PURE__*/_jsx(Products,{})},{path:\"/admin\",element:/*#__PURE__*/_jsx(Admin,{}),loader:checkRoleLoader},{path:\"/cart\",element:/*#__PURE__*/_jsx(Cart,{})},{path:\"/success\",element:/*#__PURE__*/_jsx(Success,{})},{path:\"/cancel\",element:/*#__PURE__*/_jsx(Cancel,{})},{path:\"/myorder\",element:/*#__PURE__*/_jsx(MyOrders,{})},{path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{})},{path:\"/admin/:modify\",element:/*#__PURE__*/_jsx(Modify,{}),loader:checkRoleLoader},{path:\"/product/:productId\",element:/*#__PURE__*/_jsx(ProductInfo,{})},{path:\"/reset/:token\",element:/*#__PURE__*/_jsx(ResetPassword,{})}]}]);function App(){console.log(\"in app running\");var dispatch=useDispatch();useEffect(function(){var token=localStorage.getItem(\"token\");fetch(\"https://ecommerceio.onrender.com/checklogin\",{method:\"GET\",headers:{Authorization:\"Bearer \"+token}}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.message===\"Some problem in authentication\"){dispatch(authActions.logout());}else if(data.message===\"Invalid token\"){dispatch(authActions.logout());}else if(data.message===\"User is logged in\"){dispatch(authActions.login(data.role));}});},[dispatch]);return/*#__PURE__*/_jsx(RouterProvider,{router:router});}export default App;","map":{"version":3,"names":["createBrowserRouter","RouterProvider","Home","RootLayout","Auth","Cart","React","Products","Admin","Cancel","ProductInfo","Modify","Success","checkRoleLoader","useEffect","authActions","useDispatch","MyOrders","Profile","ResetPassword","Update","jsx","_jsx","router","path","element","children","loader","App","console","log","dispatch","token","localStorage","getItem","fetch","method","headers","Authorization","then","res","json","data","message","logout","login","role"],"sources":["D:/Task1FE/src/App.js"],"sourcesContent":["import { createBrowserRouter, RouterProvider } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport RootLayout from \"./pages/RootLayout\";\r\nimport Auth from \"./pages/Auth\";\r\nimport Cart from \"./pages/Cart\";\r\nimport React from \"react\";\r\nimport Products from \"./pages/Products\";\r\nimport Admin from \"./pages/Admin\";\r\nimport Cancel from \"./pages/Cancel\";\r\nimport ProductInfo from \"./pages/ProductInfo\";\r\nimport Modify from \"./pages/Modify\";\r\nimport Success from \"./pages/Success\";\r\nimport { checkRoleLoader } from \"./util/auth\";\r\nimport { useEffect } from \"react\";\r\nimport { authActions } from \"./store/index\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport MyOrders from \"./pages/MyOrders\";\r\nimport Profile from \"./pages/Profile\";\r\nimport ResetPassword from \"./pages/ResetPassword\";\r\nimport Update from \"./Components/Update\";\r\n\r\nconst router = createBrowserRouter([\r\n  {\r\n    path: \"/\",\r\n    element: <RootLayout />,\r\n    children: [\r\n      { path: \"/\", element: <Home /> },\r\n      { path: \"/auth\", element: <Auth /> },\r\n      { path: \"/products\", element: <Products /> },\r\n      { path: \"/admin\", element: <Admin />, loader: checkRoleLoader },\r\n      { path: \"/cart\", element: <Cart /> },\r\n      { path: \"/success\", element: <Success /> },\r\n      { path: \"/cancel\", element: <Cancel /> },\r\n      { path: \"/myorder\", element: <MyOrders /> },\r\n      { path: \"/profile\", element: <Profile /> },\r\n      {\r\n        path: \"/admin/:modify\",\r\n        element: <Modify />,\r\n        loader: checkRoleLoader,\r\n      },\r\n      {\r\n        path: \"/product/:productId\",\r\n        element: <ProductInfo />,\r\n      },\r\n      {\r\n        path: \"/reset/:token\",\r\n        element: <ResetPassword />,\r\n      },\r\n    ],\r\n  },\r\n]);\r\n\r\nfunction App() {\r\n  console.log(\"in app running\");\r\n  const dispatch = useDispatch();\r\n  useEffect(() => {\r\n    const token = localStorage.getItem(\"token\");\r\n    fetch(\"https://ecommerceio.onrender.com/checklogin\", {\r\n      method: \"GET\",\r\n      headers: {\r\n        Authorization: \"Bearer \" + token,\r\n      },\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        console.log(data);\r\n        if (data.message === \"Some problem in authentication\") {\r\n          dispatch(authActions.logout());\r\n        } else if (data.message === \"Invalid token\") {\r\n          dispatch(authActions.logout());\r\n        } else if (data.message === \"User is logged in\") {\r\n          dispatch(authActions.login(data.role));\r\n        }\r\n      });\r\n  }, [dispatch]);\r\n  return <RouterProvider router={router} />;\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}